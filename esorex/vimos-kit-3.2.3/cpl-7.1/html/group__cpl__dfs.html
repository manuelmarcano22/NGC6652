<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Common Pipeline Library Reference Manual: DFS related functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="cpl.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Common Pipeline Library Reference Manual
   &#160;<span id="projectnumber">7.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">DFS related functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga4552e433babd9d05002a271254bb21e4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#ga4552e433babd9d05002a271254bb21e4">CPL_DFS_PRO_CATG</a>&#160;&#160;&#160;&quot;ESO PRO CATG&quot;</td></tr>
<tr class="memdesc:ga4552e433babd9d05002a271254bb21e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the Product Category key.  <a href="#ga4552e433babd9d05002a271254bb21e4">More...</a><br /></td></tr>
<tr class="separator:ga4552e433babd9d05002a271254bb21e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad60331be899db8f601edfbd554a29372"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#gad60331be899db8f601edfbd554a29372">CPL_DFS_PRO_SCIENCE</a>&#160;&#160;&#160;&quot;ESO PRO SCIENCE&quot;</td></tr>
<tr class="memdesc:gad60331be899db8f601edfbd554a29372"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the Product Science key.  <a href="#gad60331be899db8f601edfbd554a29372">More...</a><br /></td></tr>
<tr class="separator:gad60331be899db8f601edfbd554a29372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga40d1927c8f109dad33dd4106b0aa3162"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#ga40d1927c8f109dad33dd4106b0aa3162">CPL_DFS_PRO_TECH</a>&#160;&#160;&#160;&quot;ESO PRO TECH&quot;</td></tr>
<tr class="memdesc:ga40d1927c8f109dad33dd4106b0aa3162"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the Product Tech key.  <a href="#ga40d1927c8f109dad33dd4106b0aa3162">More...</a><br /></td></tr>
<tr class="separator:ga40d1927c8f109dad33dd4106b0aa3162"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa10eaf25bc756a8ca647b6329bc28831"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#gaa10eaf25bc756a8ca647b6329bc28831">CPL_DFS_PRO_TYPE</a>&#160;&#160;&#160;&quot;ESO PRO TYPE&quot;</td></tr>
<tr class="memdesc:gaa10eaf25bc756a8ca647b6329bc28831"><td class="mdescLeft">&#160;</td><td class="mdescRight">The name of the Product Type key.  <a href="#gaa10eaf25bc756a8ca647b6329bc28831">More...</a><br /></td></tr>
<tr class="separator:gaa10eaf25bc756a8ca647b6329bc28831"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gadc29c2ff13d900c2f185ee95427fb06c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="group__cpl__dfs.html#ggadc29c2ff13d900c2f185ee95427fb06cac69c4ac6a255442fcb9a3b220914ba7a">CPL_DFS_SIGNATURE_NONE</a>, 
<br />
&#160;&#160;<a class="el" href="group__cpl__dfs.html#ggadc29c2ff13d900c2f185ee95427fb06cadba19502dbe2231579377a716f6a027f">CPL_DFS_SIGNATURE_DATAMD5</a>, 
<br />
&#160;&#160;<a class="el" href="group__cpl__dfs.html#ggadc29c2ff13d900c2f185ee95427fb06ca010f0a9abed7b7037f1a90707ae78019">CPL_DFS_SIGNATURE_CHECKSUM</a>
<br />
 }<tr class="memdesc:gadc29c2ff13d900c2f185ee95427fb06c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pipeline products digital signature flags.  <a href="group__cpl__dfs.html#gadc29c2ff13d900c2f185ee95427fb06c">More...</a><br /></td></tr>
<tr class="separator:gadc29c2ff13d900c2f185ee95427fb06c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4db43acde522955211cd8bb2ae79b809"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#ga4db43acde522955211cd8bb2ae79b809">cpl_dfs_save_imagelist</a> (<a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *allframes, <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *header, const <a class="el" href="group__cpl__parameterlist.html#gaa9c8a14c0aa89145ed8f6381d07e6c17">cpl_parameterlist</a> *parlist, const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *usedframes, const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *inherit, const cpl_imagelist *imagelist, <a class="el" href="group__cpl__type.html#ga01345c598396c7cd159979734adfb57d">cpl_type</a> type, const char *recipe, const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *applist, const char *remregexp, const char *pipe_id, const char *filename)</td></tr>
<tr class="memdesc:ga4db43acde522955211cd8bb2ae79b809"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save an imagelist as a DFS-compliant pipeline product.  <a href="#ga4db43acde522955211cd8bb2ae79b809">More...</a><br /></td></tr>
<tr class="separator:ga4db43acde522955211cd8bb2ae79b809"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ff70ecb81f021929b2d9ad0f62b7fa3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#ga9ff70ecb81f021929b2d9ad0f62b7fa3">cpl_dfs_save_paf</a> (const char *instrume, const char *recipe, const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *paflist, const char *filename)</td></tr>
<tr class="memdesc:ga9ff70ecb81f021929b2d9ad0f62b7fa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new PAF file.  <a href="#ga9ff70ecb81f021929b2d9ad0f62b7fa3">More...</a><br /></td></tr>
<tr class="separator:ga9ff70ecb81f021929b2d9ad0f62b7fa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80f700d2f28b4e02f49a52aa4551566c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#ga80f700d2f28b4e02f49a52aa4551566c">cpl_dfs_save_propertylist</a> (<a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *allframes, <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *header, const <a class="el" href="group__cpl__parameterlist.html#gaa9c8a14c0aa89145ed8f6381d07e6c17">cpl_parameterlist</a> *parlist, const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *usedframes, const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *inherit, const char *recipe, const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *applist, const char *remregexp, const char *pipe_id, const char *filename)</td></tr>
<tr class="memdesc:ga80f700d2f28b4e02f49a52aa4551566c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save a propertylist as a DFS-compliant pipeline product.  <a href="#ga80f700d2f28b4e02f49a52aa4551566c">More...</a><br /></td></tr>
<tr class="separator:ga80f700d2f28b4e02f49a52aa4551566c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaac1a9db0bc2f92fd912192c696b0637d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#gaac1a9db0bc2f92fd912192c696b0637d">cpl_dfs_save_table</a> (<a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *allframes, <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *header, const <a class="el" href="group__cpl__parameterlist.html#gaa9c8a14c0aa89145ed8f6381d07e6c17">cpl_parameterlist</a> *parlist, const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *usedframes, const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *inherit, const cpl_table *table, const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *tablelist, const char *recipe, const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *applist, const char *remregexp, const char *pipe_id, const char *filename)</td></tr>
<tr class="memdesc:gaac1a9db0bc2f92fd912192c696b0637d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save a table as a DFS-compliant pipeline product.  <a href="#gaac1a9db0bc2f92fd912192c696b0637d">More...</a><br /></td></tr>
<tr class="separator:gaac1a9db0bc2f92fd912192c696b0637d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5945764c09e904efe5cc15172ed36fb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#ga5945764c09e904efe5cc15172ed36fb3">cpl_dfs_setup_product_header</a> (<a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *header, const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *product_frame, const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *framelist, const <a class="el" href="group__cpl__parameterlist.html#gaa9c8a14c0aa89145ed8f6381d07e6c17">cpl_parameterlist</a> *parlist, const char *recid, const char *pipeline_id, const char *dictionary_id, const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *inherit_frame)</td></tr>
<tr class="memdesc:ga5945764c09e904efe5cc15172ed36fb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add product keywords to a pipeline product property list.  <a href="#ga5945764c09e904efe5cc15172ed36fb3">More...</a><br /></td></tr>
<tr class="separator:ga5945764c09e904efe5cc15172ed36fb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17125fc033e72d382a7857a28986d93c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#ga17125fc033e72d382a7857a28986d93c">cpl_dfs_sign_products</a> (const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *set, unsigned int flags)</td></tr>
<tr class="memdesc:ga17125fc033e72d382a7857a28986d93c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update DFS and DICB required header information of product frames.  <a href="#ga17125fc033e72d382a7857a28986d93c">More...</a><br /></td></tr>
<tr class="separator:ga17125fc033e72d382a7857a28986d93c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d813636e3822382fab1d165ee035d4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__cpl__dfs.html#ga8d813636e3822382fab1d165ee035d4d">cpl_dfs_update_product_header</a> (<a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *self)</td></tr>
<tr class="memdesc:ga8d813636e3822382fab1d165ee035d4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform any DFS-compliancy required actions (DATAMD5/PIPEFILE update)  <a href="#ga8d813636e3822382fab1d165ee035d4d">More...</a><br /></td></tr>
<tr class="separator:ga8d813636e3822382fab1d165ee035d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ga4552e433babd9d05002a271254bb21e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CPL_DFS_PRO_CATG&#160;&#160;&#160;&quot;ESO PRO CATG&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name of the Product Category key. </p>
<dl class="section see"><dt>See also</dt><dd>cpl_dfs_save_image() </dd></dl>
<dl class="section note"><dt>Note</dt><dd>A pipeline product must contain a string property with this name </dd></dl>

</div>
</div>
<a class="anchor" id="gad60331be899db8f601edfbd554a29372"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CPL_DFS_PRO_SCIENCE&#160;&#160;&#160;&quot;ESO PRO SCIENCE&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name of the Product Science key. </p>
<dl class="section see"><dt>See also</dt><dd>cpl_dfs_save_image() </dd></dl>
<dl class="section note"><dt>Note</dt><dd>A pipeline product should contain a boolean property with this name </dd></dl>

</div>
</div>
<a class="anchor" id="ga40d1927c8f109dad33dd4106b0aa3162"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CPL_DFS_PRO_TECH&#160;&#160;&#160;&quot;ESO PRO TECH&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name of the Product Tech key. </p>
<dl class="section see"><dt>See also</dt><dd>cpl_dfs_save_image() </dd></dl>
<dl class="section note"><dt>Note</dt><dd>A pipeline product should contain a string property with this name </dd></dl>

</div>
</div>
<a class="anchor" id="gaa10eaf25bc756a8ca647b6329bc28831"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CPL_DFS_PRO_TYPE&#160;&#160;&#160;&quot;ESO PRO TYPE&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The name of the Product Type key. </p>
<dl class="section see"><dt>See also</dt><dd>cpl_dfs_save_image() </dd></dl>
<dl class="section note"><dt>Note</dt><dd>A pipeline product should contain a string property with this name </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gadc29c2ff13d900c2f185ee95427fb06c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pipeline products digital signature flags. </p>
<p>Flags to select the different digital signatures to compute for pipeline product files. The values may be combined using bitwise or. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a class="anchor" id="ggadc29c2ff13d900c2f185ee95427fb06cac69c4ac6a255442fcb9a3b220914ba7a"></a>CPL_DFS_SIGNATURE_NONE&#160;</td><td class="fielddoc">
<p>Do not compute any signatures </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggadc29c2ff13d900c2f185ee95427fb06cadba19502dbe2231579377a716f6a027f"></a>CPL_DFS_SIGNATURE_DATAMD5&#160;</td><td class="fielddoc">
<p>Compute the DATAMD5 data hash </p>
</td></tr>
<tr><td class="fieldname"><a class="anchor" id="ggadc29c2ff13d900c2f185ee95427fb06ca010f0a9abed7b7037f1a90707ae78019"></a>CPL_DFS_SIGNATURE_CHECKSUM&#160;</td><td class="fielddoc">
<p>Compute FITS standard CHECKSUM and DATASUM </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga4db43acde522955211cd8bb2ae79b809"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a> cpl_dfs_save_imagelist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *&#160;</td>
          <td class="paramname"><em>allframes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__parameterlist.html#gaa9c8a14c0aa89145ed8f6381d07e6c17">cpl_parameterlist</a> *&#160;</td>
          <td class="paramname"><em>parlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *&#160;</td>
          <td class="paramname"><em>usedframes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *&#160;</td>
          <td class="paramname"><em>inherit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cpl_imagelist *&#160;</td>
          <td class="paramname"><em>imagelist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cpl__type.html#ga01345c598396c7cd159979734adfb57d">cpl_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>recipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *&#160;</td>
          <td class="paramname"><em>applist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>remregexp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pipe_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save an imagelist as a DFS-compliant pipeline product. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allframes</td><td>The list of input frames for the recipe </td></tr>
    <tr><td class="paramname">header</td><td>NULL, or filled with properties written to product header </td></tr>
    <tr><td class="paramname">parlist</td><td>The list of input parameters </td></tr>
    <tr><td class="paramname">usedframes</td><td>The list of raw/calibration frames used for this product </td></tr>
    <tr><td class="paramname">inherit</td><td>NULL or product frames inherit their header from this frame </td></tr>
    <tr><td class="paramname">imagelist</td><td>The imagelist to be saved </td></tr>
    <tr><td class="paramname">type</td><td>The type used to represent the data in the file </td></tr>
    <tr><td class="paramname">recipe</td><td>The recipe name </td></tr>
    <tr><td class="paramname">applist</td><td>Propertylist to append to primary header, w. PRO.CATG </td></tr>
    <tr><td class="paramname">remregexp</td><td>Optional regexp of properties not to put in main header </td></tr>
    <tr><td class="paramname">pipe_id</td><td>PACKAGE "/" PACKAGE_VERSION </td></tr>
    <tr><td class="paramname">filename</td><td>Filename of created product </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>remregexp may be NULL </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>CPL_ERROR_NONE or the relevant CPL error code on error </dd></dl>
<dl class="section see"><dt>See also</dt><dd>cpl_dfs_save_image(), <a class="el" href="group__cpl__imagelist.html#ga8584cfc734bf716addd9315afd1ceaf2" title="Save an imagelist to disk in FITS format. ">cpl_imagelist_save()</a>. </dd></dl>

<p>References <a class="el" href="group__cpl__error.html#gaf18e95fbc6fc2cfde2a2cc8a0920b12d">cpl_ensure_code</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a0239c1c63e9d21e98e45221a3ad60406">CPL_ERROR_NONE</a>, and <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a7b054cf7927d1bd0a9b3693a6715be84">CPL_ERROR_NULL_INPUT</a>.</p>

</div>
</div>
<a class="anchor" id="ga9ff70ecb81f021929b2d9ad0f62b7fa3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a> cpl_dfs_save_paf </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>instrume</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>recipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *&#160;</td>
          <td class="paramname"><em>paflist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new PAF file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">instrume</td><td>Name of instrument in capitals (NACO, VISIR, etc.) </td></tr>
    <tr><td class="paramname">recipe</td><td>Name of recipe </td></tr>
    <tr><td class="paramname">paflist</td><td>Propertylist to save </td></tr>
    <tr><td class="paramname">filename</td><td>Filename of created PArameter File </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CPL_ERROR_NONE or the relevant CPL error code on error </dd></dl>
<dl class="section see"><dt>See also</dt><dd>cpl_dfs_save_image().</dd></dl>
<p>The example below shows how to create a PAF from some FITS cards from the file ref_file and QC parameters in a propertylist qclist. Please note that qclist can be used also in calls to cpl_dfs_save_image() and <a class="el" href="group__cpl__dfs.html#gaac1a9db0bc2f92fd912192c696b0637d" title="Save a table as a DFS-compliant pipeline product. ">cpl_dfs_save_table()</a>. Error handling is omitted for brevity:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;const char pafcopy[] = &quot;^(DATE-OBS|ARCFILE|ESO TPL ID|ESO DET DIT|MJD-OBS)$&quot;;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;cpl_propertylist * paflist = cpl_propertylist_load_regexp(ref_file, 0,</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;                                                          pafcopy, 0);</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;cpl_propertylist_append(paflist, qclist);</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;cpl_dfs_save_paf(&quot;IIINSTRUMENT&quot;, &quot;rrrecipe&quot;, paflist, &quot;rrrecipe.paf&quot;);</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;cpl_propertylist_delete(paflist);</div>
</div><!-- fragment --> 
<p>References <a class="el" href="group__cpl__error.html#gaf18e95fbc6fc2cfde2a2cc8a0920b12d">cpl_ensure_code</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900aa54303ad2fb0efc3f8c57c788b342c81">CPL_ERROR_FILE_IO</a>, <a class="el" href="group__cpl__error.html#ga724de575c31ddf40f42786306f9dbdcb">cpl_error_get_code()</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a0239c1c63e9d21e98e45221a3ad60406">CPL_ERROR_NONE</a>, and <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a7b054cf7927d1bd0a9b3693a6715be84">CPL_ERROR_NULL_INPUT</a>.</p>

</div>
</div>
<a class="anchor" id="ga80f700d2f28b4e02f49a52aa4551566c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a> cpl_dfs_save_propertylist </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *&#160;</td>
          <td class="paramname"><em>allframes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__parameterlist.html#gaa9c8a14c0aa89145ed8f6381d07e6c17">cpl_parameterlist</a> *&#160;</td>
          <td class="paramname"><em>parlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *&#160;</td>
          <td class="paramname"><em>usedframes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *&#160;</td>
          <td class="paramname"><em>inherit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>recipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *&#160;</td>
          <td class="paramname"><em>applist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>remregexp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pipe_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save a propertylist as a DFS-compliant pipeline product. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allframes</td><td>The list of input frames for the recipe </td></tr>
    <tr><td class="paramname">header</td><td>NULL, or filled with properties written to product header </td></tr>
    <tr><td class="paramname">parlist</td><td>The list of input parameters </td></tr>
    <tr><td class="paramname">usedframes</td><td>The list of raw/calibration frames used for this product </td></tr>
    <tr><td class="paramname">inherit</td><td>NULL or product frames inherit their header from this frame </td></tr>
    <tr><td class="paramname">recipe</td><td>The recipe name </td></tr>
    <tr><td class="paramname">applist</td><td>Propertylist to append to primary header, w. PRO.CATG </td></tr>
    <tr><td class="paramname">remregexp</td><td>Optional regexp of properties not to put in main header </td></tr>
    <tr><td class="paramname">pipe_id</td><td>PACKAGE "/" PACKAGE_VERSION </td></tr>
    <tr><td class="paramname">filename</td><td>Filename of created product </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>remregexp may be NULL </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>CPL_ERROR_NONE or the relevant CPL error code on error </dd></dl>
<dl class="section see"><dt>See also</dt><dd>cpl_dfs_save_image(), <a class="el" href="group__cpl__propertylist.html#gacd7a0cbf0a42ae4fef7dcd34a897b773" title="Save a property list to a FITS file. ">cpl_propertylist_save()</a>.</dd></dl>
<p>The FITS header of the created product is created from the provided applist and the cards copied by <a class="el" href="group__cpl__dfs.html#ga5945764c09e904efe5cc15172ed36fb3" title="Add product keywords to a pipeline product property list. ">cpl_dfs_setup_product_header()</a>, with exception of the cards whose keys match the provided remregexp.</p>
<p>The FITS data unit will be empty. </p>

<p>References <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a0239c1c63e9d21e98e45221a3ad60406">CPL_ERROR_NONE</a>, and <a class="el" href="group__cpl__type.html#gga3f03371e201544e9115b40065e47f086a557ce1b89a9acd48254c302ec1eed956">CPL_TYPE_INVALID</a>.</p>

</div>
</div>
<a class="anchor" id="gaac1a9db0bc2f92fd912192c696b0637d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a> cpl_dfs_save_table </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *&#160;</td>
          <td class="paramname"><em>allframes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__parameterlist.html#gaa9c8a14c0aa89145ed8f6381d07e6c17">cpl_parameterlist</a> *&#160;</td>
          <td class="paramname"><em>parlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *&#160;</td>
          <td class="paramname"><em>usedframes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *&#160;</td>
          <td class="paramname"><em>inherit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const cpl_table *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *&#160;</td>
          <td class="paramname"><em>tablelist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>recipe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *&#160;</td>
          <td class="paramname"><em>applist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>remregexp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pipe_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save a table as a DFS-compliant pipeline product. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">allframes</td><td>The list of input frames for the recipe </td></tr>
    <tr><td class="paramname">header</td><td>NULL, or filled with properties written to product header </td></tr>
    <tr><td class="paramname">parlist</td><td>The list of input parameters </td></tr>
    <tr><td class="paramname">usedframes</td><td>The list of raw/calibration frames used for this product </td></tr>
    <tr><td class="paramname">inherit</td><td>NULL or product frames inherit their header from this frame </td></tr>
    <tr><td class="paramname">table</td><td>The table to be saved </td></tr>
    <tr><td class="paramname">tablelist</td><td>Optional propertylist to use in table extension or NULL </td></tr>
    <tr><td class="paramname">recipe</td><td>The recipe name </td></tr>
    <tr><td class="paramname">applist</td><td>Propertylist to append to primary header, w. PRO.CATG </td></tr>
    <tr><td class="paramname">remregexp</td><td>Optional regexp of properties not to put in main header </td></tr>
    <tr><td class="paramname">pipe_id</td><td>PACKAGE "/" PACKAGE_VERSION </td></tr>
    <tr><td class="paramname">filename</td><td>Filename of created product </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CPL_ERROR_NONE or the relevant CPL error code on error </dd></dl>
<dl class="section see"><dt>See also</dt><dd>cpl_dfs_save_image(), <a class="el" href="group__cpl__table.html#ga0f74c8d7e280b0676d890f48a7b48977" title="Save a cpl_table to a FITS file. ">cpl_table_save()</a>. </dd></dl>

<p>References <a class="el" href="group__cpl__error.html#gaf18e95fbc6fc2cfde2a2cc8a0920b12d">cpl_ensure_code</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a0239c1c63e9d21e98e45221a3ad60406">CPL_ERROR_NONE</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a7b054cf7927d1bd0a9b3693a6715be84">CPL_ERROR_NULL_INPUT</a>, and <a class="el" href="group__cpl__type.html#gga3f03371e201544e9115b40065e47f086a557ce1b89a9acd48254c302ec1eed956">CPL_TYPE_INVALID</a>.</p>

</div>
</div>
<a class="anchor" id="ga5945764c09e904efe5cc15172ed36fb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a> cpl_dfs_setup_product_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cpl__propertylist.html#gab1629461e5d64dd8594cd505e3ea46ab">cpl_propertylist</a> *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *&#160;</td>
          <td class="paramname"><em>product_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *&#160;</td>
          <td class="paramname"><em>framelist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__parameterlist.html#gaa9c8a14c0aa89145ed8f6381d07e6c17">cpl_parameterlist</a> *&#160;</td>
          <td class="paramname"><em>parlist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>recid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pipeline_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dictionary_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__cpl__frame.html#gab894bdf9aacef0c9eab73a1f93df8fc2">cpl_frame</a> *&#160;</td>
          <td class="paramname"><em>inherit_frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add product keywords to a pipeline product property list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">header</td><td>Property list where keywords must be written </td></tr>
    <tr><td class="paramname">product_frame</td><td>Frame describing the product </td></tr>
    <tr><td class="paramname">framelist</td><td>List of frames including all input frames </td></tr>
    <tr><td class="paramname">parlist</td><td>Recipe parameter list </td></tr>
    <tr><td class="paramname">recid</td><td>Recipe name </td></tr>
    <tr><td class="paramname">pipeline_id</td><td>Pipeline unique identifier </td></tr>
    <tr><td class="paramname">dictionary_id</td><td>PRO dictionary identifier </td></tr>
    <tr><td class="paramname">inherit_frame</td><td>Frame from which header information is inherited</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>CPL_ERROR_NONE</code> on success.</dd></dl>
<dl class="exception">
<dt><b>Errors</b></dt>
<dd></dd>
<dt></dt>
<dd><table  class="ec" align="center">
<tr>
<td class="ecl">CPL_ERROR_NULL_INPUT </td><td class="ecr">An input pointer is <code>NULL</code>.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_DATA_NOT_FOUND </td><td class="ecr">The input <em>framelist</em> contains no input frames or a frame in the input <em>framelist</em> does not specify a file. In the former case the string "Empty set-of-frames" is appended to the error message returned by <a class="el" href="group__cpl__error.html#ga388e8330b31e5a488c16a00da6816c4c" title="Get the text message of the current CPL error. ">cpl_error_get_message()</a>.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_ILLEGAL_INPUT </td><td class="ecr">The product frame is not tagged or not grouped as <code>CPL_FRAME_GROUP_PRODUCT</code>. A specified <em>inherit_frame</em> doesn't belong to the input frame list, or it is not in FITS format.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_FILE_NOT_FOUND </td><td class="ecr">A frame in the input <em>framelist</em> specifies a non-existing file.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_BAD_FILE_FORMAT </td><td class="ecr">A frame in the input <em>framelist</em> specifies an invalid file.   </td></tr>
</table>
</dd>
</dl>
<p>This function checks the <em>header</em> associated to a pipeline product, to ensure that it is DICB compliant. In particular, this function does the following:</p>
<ol type="1">
<li>Selects a reference frame from which the primary and secondary keyword information is inherited. The primary information is contained in the FITS keywords ORIGIN, TELESCOPE, INSTRUME, OBJECT, RA, DEC, EPOCH, EQUINOX, RADECSYS, DATE-OBS, MJD-OBS, UTC, LST, PI-COI, OBSERVER, while the secondary information is contained in all the other keywords. If the <em>inherit_frame</em> is just a NULL pointer, both primary and secondary information is inherited from the first frame in the input framelist with group CPL_FRAME_GROUP_RAW, or if no such frames are present the first frame with group CPL_FRAME_GROUP_CALIB. If <em>inherit_frame</em> is non-NULL, the secondary information is inherited from <em>inherit_frame</em> instead.</li>
<li>Copy to <em>header</em>, if they are present, the following primary FITS keywords from the first input frame in the <em>framelist:</em> ORIGIN, TELESCOPE, INSTRUME, OBJECT, RA, DEC, EPOCH, EQUINOX, RADECSYS, DATE-OBS, MJD-OBS, UTC, LST, PI-COI, OBSERVER. If those keywords are already present in the <em>header</em> property list, they are overwritten only in case they have the same type. If any of these keywords are present with an unexpected type, a warning is issued, but the keywords are copied anyway (provided that the above conditions are fulfilled), and no error is set.</li>
<li>Copy all the HIERARCH.ESO._ keywords from the primary FITS header of the <em>inherit_frame</em> in <em>framelist</em>, with the exception of the HIERARCH.ESO.DPR._, and of the .PRO._ and .DRS._ keywords if the <em>inherit_frame</em> is a calibration. If those keywords are already present in <em>header</em>, they are overwritten.</li>
<li>If found, remove the HIERARCH.ESO.DPR._ keywords from <em>header</em>.</li>
<li>If found, remove the ARCFILE and ORIGFILE keywords from <em>header</em>.</li>
<li>Add to <em>header</em> the following mandatory keywords from the PRO dictionary: PIPEFILE, PRO.DID, PRO.REC1.ID, PRO.REC1.DRS.ID, PRO.REC1.PIPE.ID, and PRO.CATG. If those keywords are already present in <em>header</em>, they are overwritten. The keyword PRO.CATG is always set identical to the tag in <em>product_frame</em>.</li>
<li>Only if missing, add to <em>header</em> the following mandatory keywords from the PRO dictionary: PRO.TYPE, PRO.TECH, and PRO.SCIENCE. The keyword PRO.TYPE will be set to "REDUCED". If the keyword DPR.TECH is found in the header of the first frame, PRO.TECH is given its value, alternatively if the keyword PRO.TECH is found it is copied instead, and if all fails the value "UNDEFINED" is set. Finally, if the keyword DPR.CATG is found in the header of the first frame and is set to "SCIENCE", the boolean keyword PRO.SCIENCE will be set to "true", otherwise it will be copied from an existing PRO.SCIENCE keyword, while it will be set to "false" in all other cases.</li>
<li>Check the existence of the keyword PRO.DATANCOM in <em>header</em>. If this keyword is missing, one is added, with the value of the total number of raw input frames.</li>
<li>Add to <em>header</em> the keywords PRO.REC1.RAW1.NAME, PRO.REC1.RAW1.CATG, PRO.REC1.CAL1.NAME, PRO.REC1.CAL1.CATG, to describe the content of the input set-of-frames.</li>
</ol>
<p>See the DICB PRO dictionary to have details on the mentioned PRO keywords.</p>
<dl class="section note"><dt>Note</dt><dd>Non-FITS files are handled as files with an empty FITS header. </dd></dl>

<p>References <a class="el" href="group__cpl__error.html#gaf18e95fbc6fc2cfde2a2cc8a0920b12d">cpl_ensure_code</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a0d916ea6a7e198a74863ecd9ea03d733">CPL_ERROR_ACCESS_OUT_OF_RANGE</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a5b82c7780a2a8a79dfafcac70717b830">CPL_ERROR_DATA_NOT_FOUND</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a583f56576cdfdd4c23da42b041ca8b1d">CPL_ERROR_FILE_NOT_FOUND</a>, <a class="el" href="group__cpl__error.html#ga724de575c31ddf40f42786306f9dbdcb">cpl_error_get_code()</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900ae6ab32df318c1af9afcddcb8249cad51">CPL_ERROR_ILLEGAL_INPUT</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a0239c1c63e9d21e98e45221a3ad60406">CPL_ERROR_NONE</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a7b054cf7927d1bd0a9b3693a6715be84">CPL_ERROR_NULL_INPUT</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900abb6808829dd2b06a86ec503f1169eab3">CPL_ERROR_UNSPECIFIED</a>, <a class="el" href="group__cpl__errorstate.html#gadbf3f1525429b95837bc79a5e99b12cd">cpl_errorstate_get()</a>, <a class="el" href="group__cpl__errorstate.html#gaa72d44efb065d64d8f1cac3d0e5bf8af">cpl_errorstate_set()</a>, <a class="el" href="group__cpl__frame.html#ga9e35a805531aaf1f41569f0330754684">cpl_frame_get_filename()</a>, <a class="el" href="group__cpl__frame.html#ga130fe65cfb8a9e0587af0d2fbc638e70">cpl_frame_get_group()</a>, <a class="el" href="group__cpl__frame.html#ga6e0f66f528c8cef07216b9425684169a">cpl_frame_get_tag()</a>, <a class="el" href="group__cpl__frame.html#gga1e95fbf84f17f9b9975dcedc2bdcaf49aef55137f124a7891b848d173d83d102c">CPL_FRAME_GROUP_CALIB</a>, <a class="el" href="group__cpl__frame.html#gga1e95fbf84f17f9b9975dcedc2bdcaf49ae9bf30bca110b032879006d1d73d8b78">CPL_FRAME_GROUP_PRODUCT</a>, <a class="el" href="group__cpl__frame.html#gga1e95fbf84f17f9b9975dcedc2bdcaf49a25fb34b92b31f35bf3a60d6b15c6def9">CPL_FRAME_GROUP_RAW</a>, <a class="el" href="group__cpl__frameset.html#ga2cd8e6f169e354975c615c9137332c6c">cpl_frameset_get_size()</a>, <a class="el" href="group__cpl__frameset__iterator.html#gab5470d6de30ea9252622e383fc3403e7">cpl_frameset_iterator_advance()</a>, <a class="el" href="group__cpl__frameset__iterator.html#gab3567545abf2eeaec6640f46d1c14aee">cpl_frameset_iterator_delete()</a>, <a class="el" href="group__cpl__frameset__iterator.html#gad6ecfcdfc89331824a8145dc9cb63658">cpl_frameset_iterator_get_const()</a>, <a class="el" href="group__cpl__frameset__iterator.html#gadd4a4633aa6599fe90dfbc26c242e2c5">cpl_frameset_iterator_new()</a>, <a class="el" href="group__cpl__frameset__iterator.html#gaba6c4a61e3233be2bc79b38498bf5c90">cpl_frameset_iterator_reset()</a>, <a class="el" href="group__cpl__memory.html#ga9cd2b64cbbe05ec9f34fda048184b4d1">cpl_free()</a>, <a class="el" href="group__cpl__msg.html#ga9e565ba4258d65624e73988baf5d8169">cpl_msg_warning()</a>, <a class="el" href="group__cpl__parameter.html#gac7dddc10c1172c824140fd88910a28f6">cpl_parameter_get_alias()</a>, <a class="el" href="group__cpl__parameter.html#ga5052461cceb9bf9b6de9be10fc850f8e">cpl_parameter_get_bool()</a>, <a class="el" href="group__cpl__parameter.html#ga883e755e318c2816c01e99fe16ec1f55">cpl_parameter_get_default_bool()</a>, <a class="el" href="group__cpl__parameter.html#ga68f5f7644d9dba5c7f90e4ecfcb3ce0b">cpl_parameter_get_default_double()</a>, <a class="el" href="group__cpl__parameter.html#gac685a0bfe4c06aeae671d076ef6ed987">cpl_parameter_get_default_int()</a>, <a class="el" href="group__cpl__parameter.html#ga7af02dcb8e93ae4d5e32305594e46553">cpl_parameter_get_default_string()</a>, <a class="el" href="group__cpl__parameter.html#gad5e687ea250dca59819e5baadc004636">cpl_parameter_get_double()</a>, <a class="el" href="group__cpl__parameter.html#gab745afb7e7c648bbd619d3192eacc0be">cpl_parameter_get_help()</a>, <a class="el" href="group__cpl__parameter.html#ga207f7eef6b9d80d5962b62f8283756d7">cpl_parameter_get_int()</a>, <a class="el" href="group__cpl__parameter.html#gab42fa99c9a0234a1bb0235c4883e3824">cpl_parameter_get_string()</a>, <a class="el" href="group__cpl__parameter.html#ga07a58b472b9c635e98292ca7ea4dce64">cpl_parameter_get_type()</a>, <a class="el" href="group__cpl__parameter.html#gga9d9ebbe5b417035c63c4b34621eddb7caf1d6a92075c6a42bdae7f86088e914a5">CPL_PARAMETER_MODE_CLI</a>, <a class="el" href="group__cpl__parameterlist.html#ga51a6492369fea9ec6bf59f4d21e9a289">cpl_parameterlist_get_first_const()</a>, <a class="el" href="group__cpl__parameterlist.html#gad76d9f9ded67e70ec577647c6ebf2269">cpl_parameterlist_get_next_const()</a>, <a class="el" href="group__cpl__propertylist.html#ga475086d1458cc6d4cf8a37a8f6cdf3b0">cpl_propertylist_append_string()</a>, <a class="el" href="group__cpl__propertylist.html#ga239a170bc1d2006aa58720827a7fe60b">cpl_propertylist_copy_property()</a>, <a class="el" href="group__cpl__propertylist.html#ga8ad1d13749c2dbc2d3e61672085169b6">cpl_propertylist_copy_property_regexp()</a>, <a class="el" href="group__cpl__propertylist.html#gae02f740d29133f8ecd419cf2f4e31efe">cpl_propertylist_delete()</a>, <a class="el" href="group__cpl__propertylist.html#ga7f98345cde444f97b448fd3bad44e965">cpl_propertylist_erase()</a>, <a class="el" href="group__cpl__propertylist.html#gab2381a85b0d198cb4a047e62b58069ef">cpl_propertylist_erase_regexp()</a>, <a class="el" href="group__cpl__propertylist.html#gaad01bdf6f35d2043eb1edf8def84f5f1">cpl_propertylist_get_bool()</a>, <a class="el" href="group__cpl__propertylist.html#ga99b8aef42a91401ce76b4a2ff05dd629">cpl_propertylist_get_string()</a>, <a class="el" href="group__cpl__propertylist.html#ga958d712093fe7e4aaac326adfdd1ba95">cpl_propertylist_get_type()</a>, <a class="el" href="group__cpl__propertylist.html#ga3c1cda7ff8b40d12073df3873134bbb9">cpl_propertylist_has()</a>, <a class="el" href="group__cpl__propertylist.html#ga32059ac9311a1ce3f825172cf8fd3eed">cpl_propertylist_load_regexp()</a>, <a class="el" href="group__cpl__propertylist.html#ga38d4962818e4c35308e3404bbfb7dbc4">cpl_propertylist_new()</a>, <a class="el" href="group__cpl__propertylist.html#gaec9d794ffc162dd8403626c8e1277766">cpl_propertylist_set_comment()</a>, <a class="el" href="group__cpl__propertylist.html#ga790faea686739bfe3d30ee07243b93bb">cpl_propertylist_update_bool()</a>, <a class="el" href="group__cpl__propertylist.html#gab0fa4acce3b7e20daf36294cfb7e289e">cpl_propertylist_update_int()</a>, <a class="el" href="group__cpl__propertylist.html#gaea2c4611cd700f0e144bb5db9db1bc22">cpl_propertylist_update_string()</a>, <a class="el" href="group__cpl__memory.html#ga3182acba4528fb26736337aadfb839de">cpl_sprintf()</a>, <a class="el" href="group__cpl__memory.html#ga1301bd6ea92c85b1a7d9430e51f001e8">cpl_strdup()</a>, <a class="el" href="group__cpl__type.html#gga3f03371e201544e9115b40065e47f086ae507f82494e90964eaa5b70535a10869">CPL_TYPE_BOOL</a>, <a class="el" href="group__cpl__type.html#gga3f03371e201544e9115b40065e47f086a4923f03f3a673edd344b0d81835ca69e">CPL_TYPE_DOUBLE</a>, <a class="el" href="group__cpl__type.html#gga3f03371e201544e9115b40065e47f086ae333db5ccea0813ccd892525b4ba1345">CPL_TYPE_INT</a>, and <a class="el" href="group__cpl__type.html#gga3f03371e201544e9115b40065e47f086a8c58196493fdac6c0424560417cd6bf8">CPL_TYPE_STRING</a>.</p>

</div>
</div>
<a class="anchor" id="ga17125fc033e72d382a7857a28986d93c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a> cpl_dfs_sign_products </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *&#160;</td>
          <td class="paramname"><em>set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update DFS and DICB required header information of product frames. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">set</td><td>The frameset from which the product frames are taken. </td></tr>
    <tr><td class="paramname">flags</td><td>Bit mask for selecting the digital signatures to be written.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns <code>CPL_ERROR_NONE</code> on success, or an appropriate CPL error code otherwise.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Each product frame must correspond to a FITS file created with a CPL FITS saving function.</dd></dl>
<p>The function takes all frames marked as products from the input frameset <em>set</em>. For each product the header information <code>PIPEFILE</code> is updated unconditionally. In addition, depending on the bit mask <em>flags</em>, the <code>DATAMD5</code> data hash and/or the standard FITS checksums are computed and written to the product header. If a digital signature is not selected by <em>flags</em> when the function is called, its corresponding header keyword(s) are removed from the product frame.</p>
<dl class="exception">
<dt><b>Errors</b></dt>
<dd></dd>
<dt></dt>
<dd><table  class="ec" align="center">
<tr>
<td class="ecl">CPL_ERROR_NULL_INPUT </td><td class="ecr">An input pointer is <code>NULL</code>.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_DATA_NOT_FOUND </td><td class="ecr">The input <em>framelist</em> contains a frame of type product with a missing filename.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_BAD_FILE_FORMAT </td><td class="ecr">The input <em>framelist</em> contains a frame of type product without a FITS card with key 'DATAMD5'.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_FILE_IO </td><td class="ecr">The input <em>framelist</em> contains a frame of type product for which the FITS card with key 'DATAMD5' could not be updated.   </td></tr>
</table>
</dd>
</dl>

<p>References <a class="el" href="group__cpl__dfs.html#ggadc29c2ff13d900c2f185ee95427fb06cac69c4ac6a255442fcb9a3b220914ba7a">CPL_DFS_SIGNATURE_NONE</a>, <a class="el" href="group__cpl__error.html#gaf18e95fbc6fc2cfde2a2cc8a0920b12d">cpl_ensure_code</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a0d916ea6a7e198a74863ecd9ea03d733">CPL_ERROR_ACCESS_OUT_OF_RANGE</a>, <a class="el" href="group__cpl__error.html#ga724de575c31ddf40f42786306f9dbdcb">cpl_error_get_code()</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a0239c1c63e9d21e98e45221a3ad60406">CPL_ERROR_NONE</a>, <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a7b054cf7927d1bd0a9b3693a6715be84">CPL_ERROR_NULL_INPUT</a>, <a class="el" href="group__cpl__errorstate.html#gadbf3f1525429b95837bc79a5e99b12cd">cpl_errorstate_get()</a>, <a class="el" href="group__cpl__errorstate.html#gaa72d44efb065d64d8f1cac3d0e5bf8af">cpl_errorstate_set()</a>, <a class="el" href="group__cpl__frame.html#ga130fe65cfb8a9e0587af0d2fbc638e70">cpl_frame_get_group()</a>, <a class="el" href="group__cpl__frame.html#gga1e95fbf84f17f9b9975dcedc2bdcaf49ae9bf30bca110b032879006d1d73d8b78">CPL_FRAME_GROUP_PRODUCT</a>, <a class="el" href="group__cpl__frameset.html#ga27a2a8a687855272bcdc45f6e7b2ef65">cpl_frameset_is_empty()</a>, <a class="el" href="group__cpl__frameset__iterator.html#gab5470d6de30ea9252622e383fc3403e7">cpl_frameset_iterator_advance()</a>, <a class="el" href="group__cpl__frameset__iterator.html#gab3567545abf2eeaec6640f46d1c14aee">cpl_frameset_iterator_delete()</a>, <a class="el" href="group__cpl__frameset__iterator.html#gad6ecfcdfc89331824a8145dc9cb63658">cpl_frameset_iterator_get_const()</a>, and <a class="el" href="group__cpl__frameset__iterator.html#gadd4a4633aa6599fe90dfbc26c242e2c5">cpl_frameset_iterator_new()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8d813636e3822382fab1d165ee035d4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__cpl__error.html#ga44b4287e8a7a22122b94c220a1dd9459">cpl_error_code</a> cpl_dfs_update_product_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__cpl__frameset.html#ga3dbb2e3c25fc8f498172799575fbab9d">cpl_frameset</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform any DFS-compliancy required actions (DATAMD5/PIPEFILE update) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>The list of frames with FITS products created by the recipe </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CPL_ERROR_NONE or the relevant CPL error code on error </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Each product frame must correspond to a FITS file created with a CPL FITS saving function.</dd></dl>
<dl class="exception">
<dt><b>Errors</b></dt>
<dd></dd>
<dt></dt>
<dd><table  class="ec" align="center">
<tr>
<td class="ecl">CPL_ERROR_NULL_INPUT </td><td class="ecr">An input pointer is <code>NULL</code>.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_DATA_NOT_FOUND </td><td class="ecr">The input <em>framelist</em> contains a frame of type product with a missing filename.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_BAD_FILE_FORMAT </td><td class="ecr">The input <em>framelist</em> contains a frame of type product without a FITS card with key 'DATAMD5'.   </td></tr>
<tr>
<td class="ecl">CPL_ERROR_FILE_IO </td><td class="ecr">The input <em>framelist</em> contains a frame of type product for which the FITS card with key 'DATAMD5' could not be updated.   </td></tr>
</table>
</dd>
</dl>

<p>References <a class="el" href="group__cpl__error.html#gga49a0c316d52d2afbfd9fd94b95344900a0239c1c63e9d21e98e45221a3ad60406">CPL_ERROR_NONE</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
